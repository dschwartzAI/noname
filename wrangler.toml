name = "shadcn-admin-cf-ai"
main = "worker.ts"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]

[[kv_namespaces]]
binding = "KV"
id = "d34df303acd8498ab4e74ec22f0b9b1d"

[[kv_namespaces]]
binding = "SESSIONS"
id = "ba789d2e87b7422baf321c2d7aa85c99"

# Vectorize - Vector database for RAG (Disabled for initial deployment)
# [[vectorize]]
# binding = "VECTORIZE"
# index_name = "rag-knowledge-base"
# experimental_remote = true

# R2 bucket for AutoRAG document storage (Disabled for initial deployment)
# [[r2_buckets]]
# binding = "R2_DOCUMENTS"
# bucket_name = "buildmantle-rag-documents"

# AutoRAG - Fully managed RAG service (Disabled for initial deployment)
# [[autorag_stores]]
# binding = "AUTORAG"
# store_name = "buildmantletest"
# r2_source = "R2_DOCUMENTS"

[ai]
binding = "AI"

# For development, we'll remove the problematic KV bindings and use minimal config
[env.development]
name = "shadcn-admin-dev"
experimental_vectorize_bind_to_prod = true

[env.development.ai]
binding = "AI"

# [[env.development.vectorize]]
# binding = "VECTORIZE"
# index_name = "rag-knowledge-base"
# experimental_remote = true

# [[env.development.r2_buckets]]
# binding = "R2_DOCUMENTS"
# bucket_name = "buildmantle-rag-documents"

# [[env.development.autorag_stores]]
# binding = "AUTORAG"
# store_name = "buildmantletest"
# r2_source = "R2_DOCUMENTS"

[[env.development.kv_namespaces]]
binding = "KV"
id = "d34df303acd8498ab4e74ec22f0b9b1d"

[[env.development.kv_namespaces]]
binding = "SESSIONS"
id = "ba789d2e87b7422baf321c2d7aa85c99"

[[env.development.durable_objects.bindings]]
name = "AI_CHAT_WEBSOCKET"
class_name = "AIChatWebSocket"

[[env.development.durable_objects.bindings]]
name = "VOICE_AI_WEBSOCKET"
class_name = "VoiceAIWebSocket"

[[env.development.durable_objects.bindings]]
name = "USER_SYS_DO"
class_name = "UserSysDO"

[env.development.vars]
NODE_ENV = "development"
DATABASE_URL = "postgresql://neondb_owner:npg_YBZ6UpWyojN4@ep-holy-dawn-afutxqyk.c-2.us-west-2.aws.neon.tech/neondb?sslmode=require"
BETTER_AUTH_URL = "http://localhost:5173"
BETTER_AUTH_SECRET = "CPmXy0XgIWaOICeanyyFhR5eFwyQgoSJ0LpGtgJrpHc="
GOOGLE_CLIENT_ID = ""
GOOGLE_CLIENT_SECRET = ""
GITHUB_CLIENT_ID = ""
GITHUB_CLIENT_SECRET = ""
GOOGLE_API_KEY = ""
AI_GATEWAY_URL = ""
ELEVENLABS_API_KEY = ""
DEEPGRAM_API_KEY = ""
ANTHROPIC_API_KEY = "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"
OPENAI_API_KEY = "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"
XAI_API_KEY = "xai-p2cV3glyRwrSOWdTxrGy4E46yQT9qq9VCRZl5L065nzuipKALDn4We3bfiAuTLH6WTQdyWc249Z8vLuG"

# Assets and SPA configuration (disabled for development)
# [assets]
# binding = "ASSETS"
# directory = "./dist/client"
# not_found_handling = "single-page-application"

[[durable_objects.bindings]]
name = "AI_CHAT_WEBSOCKET"
class_name = "AIChatWebSocket"

[[durable_objects.bindings]]
name = "VOICE_AI_WEBSOCKET"
class_name = "VoiceAIWebSocket"

[[durable_objects.bindings]]
name = "USER_SYS_DO"
class_name = "UserSysDO"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["AIChatWebSocket"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["VoiceAIWebSocket"]

[[migrations]]
tag = "v3"
new_sqlite_classes = ["UserSysDO"]

# Secrets (set via: wrangler secret put <NAME>):
# - DATABASE_URL: Neon Postgres connection string

[vars]
BETTER_AUTH_URL = "https://shadcn-admin-cf-ai.dan-ccc.workers.dev"
BETTER_AUTH_SECRET = "CPmXy0XgIWaOICeanyyFhR5eFwyQgoSJ0LpGtgJrpHc="
GOOGLE_CLIENT_ID = ""
GOOGLE_CLIENT_SECRET = ""
GITHUB_CLIENT_ID = ""
GITHUB_CLIENT_SECRET = ""
GOOGLE_API_KEY = ""
AI_GATEWAY_URL = ""
ELEVENLABS_API_KEY = ""
DEEPGRAM_API_KEY = ""

[env.production.vars]
BETTER_AUTH_URL = "https://your-domain.com"
BETTER_AUTH_SECRET = "CPmXy0XgIWaOICeanyyFhR5eFwyQgoSJ0LpGtgJrpHc="
GOOGLE_CLIENT_ID = ""
GOOGLE_CLIENT_SECRET = ""
GITHUB_CLIENT_ID = ""
GITHUB_CLIENT_SECRET = ""
GOOGLE_API_KEY = ""
AI_GATEWAY_URL = ""
ELEVENLABS_API_KEY = ""
DEEPGRAM_API_KEY = ""